{"Version":"2019-10-30","StartAction":"5f8012d1-cac4-4577-ba60-99c216a7d4a8","Metadata":{"entryPointPosition":{"x":-140.8,"y":44},"ActionMetadata":{"dff76cf5-d73a-4c12-b68e-495c9a7e1bbc":{"position":{"x":2468.8,"y":244.8}},"598bfc87-b906-4c59-828e-7a18dbf1e72e":{"position":{"x":2021.6,"y":532.8}},"7c4108dc-a97e-4c3c-a69b-4e7f7dcdafbd":{"position":{"x":1142.4,"y":188.8},"dynamicParams":[]},"b1905997-59e5-4d78-9dbd-763e8d156ac1":{"position":{"x":1629.6,"y":154.4},"conditions":[],"conditionMetadata":[{"id":"70a8983b-e3c1-4482-850a-1a67d7b8ef59","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"200"}]},"7e3b2b2c-11ea-4777-b3d6-4ac5b93b2683":{"position":{"x":1406.4,"y":162.4},"parameters":{"LambdaInvocationAttributes":{"caseNumber":{"useDynamic":true},"contactId":{"useDynamic":true}}},"dynamicMetadata":{"caseNumber":true,"contactId":true}},"d8e90d4b-9ed8-4640-95b2-a1fb054b224a":{"position":{"x":1762.4,"y":536.8},"conditions":[],"conditionMetadata":[{"id":"4394b108-2075-444a-8896-0f07616755d6","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"200"}]},"1137efc2-201c-46a6-b1f5-873e4824d06b":{"position":{"x":1281.6,"y":554.4},"useLexBotDropdown":true,"conditionMetadata":[{"id":"2c0dea38-1788-4e6d-8b09-b65b850fe921","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"sugarFallback"}]},"cbf96ced-4408-4e68-ab82-c27d95a96220":{"position":{"x":1534.4,"y":572},"parameters":{"LambdaInvocationAttributes":{"contactName":{"useDynamic":true},"accountId":{"useDynamic":true},"contactId":{"useDynamic":true},"caseDescription":{"useDynamic":true}}},"dynamicMetadata":{"caseSource":false,"contactName":true,"accountId":true,"contactId":true,"caseDescription":true}},"53529a47-c775-4d96-a8d0-e44df173d93e":{"position":{"x":681.6,"y":532.8},"parameters":{"ContactFlowId":{"displayName":"Sample queue configurations flow"}},"ContactFlow":{"text":"Sample queue configurations flow"}},"9af8d52f-b065-477a-b00a-c849a19de262":{"position":{"x":1889.6,"y":250.4}},"342a844a-c105-4c9d-9a32-297f78565e8d":{"position":{"x":2216,"y":737.6},"dynamicParams":[]},"5cc76281-fe75-4004-be2c-d869fc6b6b41":{"position":{"x":961.6,"y":550.4},"useLexBotDropdown":true,"conditionMetadata":[{"id":"62c8f787-5bb1-49bd-8802-be886fd8c3d4","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"openCaseSelf"},{"id":"a5e3033d-3414-44f7-8852-5aad9c5fca0c","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"connectToAgent"}]},"e4206c32-04fe-4087-8378-82599f8308ae":{"position":{"x":898.4,"y":208},"conditions":[],"conditionMetadata":[{"id":"48bf9add-b795-4674-b0bc-a38085bcc4a1","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"0"}]},"cfb0a4cc-b0e1-4748-bcab-d841bf69f69c":{"position":{"x":1890.4,"y":100}},"b854d9a5-d006-4a40-b99e-2e5acf4aaf16":{"position":{"x":2216.8,"y":236}},"5f8012d1-cac4-4577-ba60-99c216a7d4a8":{"position":{"x":44,"y":124.8}},"8bf390a6-de38-48ee-93e4-3e5e99557567":{"position":{"x":591.2,"y":148.8},"useLexBotDropdown":true,"conditionMetadata":[{"id":"b8eb5bb9-ccd4-4bda-bc51-2709d5129d8f","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"getCase"},{"id":"c3899693-ed9b-465b-9156-7556dcad3db5","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"openCase"},{"id":"538b01bb-0093-40af-8044-caed0c40f952","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"done"},{"id":"4b985fd1-4281-406f-a3c8-e2478c352675","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"connectToAgent"}]},"c931ee33-1884-4414-85e9-a8b1655e77e2":{"position":{"x":668.8,"y":756}},"9323e97f-8e3f-42d6-bc3c-9afd53f62e9e":{"position":{"x":45.6,"y":335.2}},"463c2d91-9192-4952-a079-673b07de5251":{"position":{"x":452,"y":529.6}},"2a6d8e7a-6a6d-4ca4-98cf-dd14eb26fb84":{"position":{"x":1064.8,"y":932.8}},"bb5d11a8-81cd-40cf-ab8e-8f051e91cc7d":{"position":{"x":313.6,"y":76.8},"conditions":[],"conditionMetadata":[{"id":"45764717-740b-420f-83a5-81f48072b2cc","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"0"}]},"3a2c5200-9ec3-4547-9651-73f8424b84d2":{"position":{"x":587.2,"y":-184},"useLexBotDropdown":true,"conditionMetadata":[{"id":"1bd00882-3757-498f-a081-4dad388b0d95","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"done"},{"id":"2de14e2a-3edf-46bd-b25e-7e763bd11ccc","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"connectToAgent"}]}},"Annotations":[],"name":"SugarCRM_Portal_Chat_Contact_Flow-v1.0","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{},"Identifier":"dff76cf5-d73a-4c12-b68e-495c9a7e1bbc","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Text":"Your case is being created.\nYour case number is $.External.caseNumber. Someone will be in touch shortly."},"Identifier":"598bfc87-b906-4c59-828e-7a18dbf1e72e","Type":"MessageParticipant","Transitions":{"NextAction":"342a844a-c105-4c9d-9a32-297f78565e8d"}},{"Parameters":{"Attributes":{"sugarCaseNumber":"$.Lex.Slots.caseNumber"},"TargetContact":"Current"},"Identifier":"7c4108dc-a97e-4c3c-a69b-4e7f7dcdafbd","Type":"UpdateContactAttributes","Transitions":{"NextAction":"7e3b2b2c-11ea-4777-b3d6-4ac5b93b2683","Errors":[{"NextAction":"7e3b2b2c-11ea-4777-b3d6-4ac5b93b2683","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.statusCode"},"Identifier":"b1905997-59e5-4d78-9dbd-763e8d156ac1","Type":"Compare","Transitions":{"NextAction":"cfb0a4cc-b0e1-4748-bcab-d841bf69f69c","Conditions":[{"NextAction":"9af8d52f-b065-477a-b00a-c849a19de262","Condition":{"Operator":"Equals","Operands":["200"]}}],"Errors":[{"NextAction":"cfb0a4cc-b0e1-4748-bcab-d841bf69f69c","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:eu-west-2:897790359321:function:SugarLambda-CaseStatusFunction-1F65W7FSHVC0I","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"caseNumber":"$.Lex.Slots.caseNumber","contactId":"$.Attributes.sugarContactId"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"7e3b2b2c-11ea-4777-b3d6-4ac5b93b2683","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"b1905997-59e5-4d78-9dbd-763e8d156ac1","Errors":[{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.statusCode"},"Identifier":"d8e90d4b-9ed8-4640-95b2-a1fb054b224a","Type":"Compare","Transitions":{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","Conditions":[{"NextAction":"598bfc87-b906-4c59-828e-7a18dbf1e72e","Condition":{"Operator":"Equals","Operands":["200"]}}],"Errors":[{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Text":"Please state the problem you are experiencing and press enter when you are done.","LexBot":{"Name":"SugarServeSampleBot","Region":"eu-west-2","Alias":"$LATEST"}},"Identifier":"1137efc2-201c-46a6-b1f5-873e4824d06b","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","Conditions":[{"NextAction":"cbf96ced-4408-4e68-ab82-c27d95a96220","Condition":{"Operator":"Equals","Operands":["sugarFallback"]}}],"Errors":[{"NextAction":"cbf96ced-4408-4e68-ab82-c27d95a96220","ErrorType":"NoMatchingCondition"},{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:eu-west-2:897790359321:function:SugarLambda-CreateCaseFunction-RAT1RVRQEHQK","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"caseSource":"Chatbot","contactName":"$.Attributes.sugarContactName","accountId":"$.Attributes.sugarAccountId","contactId":"$.Attributes.sugarContactId","caseDescription":"$.Lex.SessionAttributes.string"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"cbf96ced-4408-4e68-ab82-c27d95a96220","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"d8e90d4b-9ed8-4640-95b2-a1fb054b224a","Errors":[{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ContactFlowId":"arn:aws:connect:us-west-2:897790359321:instance/aee918e0-68ca-47df-af68-75bf31053633/contact-flow/2015e83e-408d-4462-8653-66c975b9ded5"},"Identifier":"53529a47-c775-4d96-a8d0-e44df173d93e","Type":"TransferToFlow","Transitions":{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","Errors":[{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"The status of your case is $.External.caseStatus"},"Identifier":"9af8d52f-b065-477a-b00a-c849a19de262","Type":"MessageParticipant","Transitions":{"NextAction":"b854d9a5-d006-4a40-b99e-2e5acf4aaf16"}},{"Parameters":{"Attributes":{"sugarCaseNumber":"$.External.caseNumber"},"TargetContact":"Current"},"Identifier":"342a844a-c105-4c9d-9a32-297f78565e8d","Type":"UpdateContactAttributes","Transitions":{"NextAction":"b854d9a5-d006-4a40-b99e-2e5acf4aaf16","Errors":[{"NextAction":"b854d9a5-d006-4a40-b99e-2e5acf4aaf16","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Would you like to open the case yourself or speak with an agent?","LexBot":{"Name":"SugarServeSampleBot","Region":"eu-west-2","Alias":"$LATEST"}},"Identifier":"5cc76281-fe75-4004-be2c-d869fc6b6b41","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"463c2d91-9192-4952-a079-673b07de5251","Conditions":[{"NextAction":"1137efc2-201c-46a6-b1f5-873e4824d06b","Condition":{"Operator":"Equals","Operands":["openCaseSelf"]}},{"NextAction":"463c2d91-9192-4952-a079-673b07de5251","Condition":{"Operator":"Equals","Operands":["connectToAgent"]}}],"Errors":[{"NextAction":"463c2d91-9192-4952-a079-673b07de5251","ErrorType":"NoMatchingCondition"},{"NextAction":"463c2d91-9192-4952-a079-673b07de5251","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.Lex.Slots.caseNumber"},"Identifier":"e4206c32-04fe-4087-8378-82599f8308ae","Type":"Compare","Transitions":{"NextAction":"7c4108dc-a97e-4c3c-a69b-4e7f7dcdafbd","Conditions":[{"NextAction":"463c2d91-9192-4952-a079-673b07de5251","Condition":{"Operator":"Equals","Operands":["0"]}}],"Errors":[{"NextAction":"7c4108dc-a97e-4c3c-a69b-4e7f7dcdafbd","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Text":"Error retrieving case $.Lex.Slots.caseNumber."},"Identifier":"cfb0a4cc-b0e1-4748-bcab-d841bf69f69c","Type":"MessageParticipant","Transitions":{"NextAction":"bb5d11a8-81cd-40cf-ab8e-8f051e91cc7d"}},{"Parameters":{"Text":"If you would like to do something else, you can choose from the options or type \"done\" if you are done."},"Identifier":"b854d9a5-d006-4a40-b99e-2e5acf4aaf16","Type":"MessageParticipant","Transitions":{"NextAction":"bb5d11a8-81cd-40cf-ab8e-8f051e91cc7d"}},{"Parameters":{"Text":"Hello $.Attributes.sugarContactName, you can ask for any of the following options. At any time during our conversation, type “connect to an agent” to speak with an agent."},"Identifier":"5f8012d1-cac4-4577-ba60-99c216a7d4a8","Type":"MessageParticipant","Transitions":{"NextAction":"bb5d11a8-81cd-40cf-ab8e-8f051e91cc7d"}},{"Parameters":{"Text":"a. Check case status\nb. Open a case\nc. Connect to an agent","LexBot":{"Name":"SugarServeSampleBot","Region":"eu-west-2","Alias":"$LATEST"}},"Identifier":"8bf390a6-de38-48ee-93e4-3e5e99557567","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","Conditions":[{"NextAction":"e4206c32-04fe-4087-8378-82599f8308ae","Condition":{"Operator":"Equals","Operands":["getCase"]}},{"NextAction":"5cc76281-fe75-4004-be2c-d869fc6b6b41","Condition":{"Operator":"Equals","Operands":["openCase"]}},{"NextAction":"2a6d8e7a-6a6d-4ca4-98cf-dd14eb26fb84","Condition":{"Operator":"Equals","Operands":["done"]}},{"NextAction":"463c2d91-9192-4952-a079-673b07de5251","Condition":{"Operator":"Equals","Operands":["connectToAgent"]}}],"Errors":[{"NextAction":"9323e97f-8e3f-42d6-bc3c-9afd53f62e9e","ErrorType":"NoMatchingCondition"},{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Unexpected error."},"Identifier":"c931ee33-1884-4414-85e9-a8b1655e77e2","Type":"MessageParticipant","Transitions":{"NextAction":"bb5d11a8-81cd-40cf-ab8e-8f051e91cc7d"}},{"Parameters":{"Text":"I do not understand that.\nPlease try again."},"Identifier":"9323e97f-8e3f-42d6-bc3c-9afd53f62e9e","Type":"MessageParticipant","Transitions":{"NextAction":"bb5d11a8-81cd-40cf-ab8e-8f051e91cc7d"}},{"Parameters":{"Text":"One moment while I transfer you to an agent"},"Identifier":"463c2d91-9192-4952-a079-673b07de5251","Type":"MessageParticipant","Transitions":{"NextAction":"53529a47-c775-4d96-a8d0-e44df173d93e"}},{"Parameters":{"Text":"Thank you, have a good day!"},"Identifier":"2a6d8e7a-6a6d-4ca4-98cf-dd14eb26fb84","Type":"MessageParticipant","Transitions":{"NextAction":"dff76cf5-d73a-4c12-b68e-495c9a7e1bbc"}},{"Parameters":{"ComparisonValue":"$.Attributes.sugarContactId"},"Identifier":"bb5d11a8-81cd-40cf-ab8e-8f051e91cc7d","Type":"Compare","Transitions":{"NextAction":"8bf390a6-de38-48ee-93e4-3e5e99557567","Conditions":[{"NextAction":"3a2c5200-9ec3-4547-9651-73f8424b84d2","Condition":{"Operator":"Equals","Operands":["0"]}}],"Errors":[{"NextAction":"8bf390a6-de38-48ee-93e4-3e5e99557567","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Text":"Type \"c\" to connect to an agent","LexBot":{"Name":"SugarServeSampleBot","Region":"eu-west-2","Alias":"$LATEST"}},"Identifier":"3a2c5200-9ec3-4547-9651-73f8424b84d2","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","Conditions":[{"NextAction":"2a6d8e7a-6a6d-4ca4-98cf-dd14eb26fb84","Condition":{"Operator":"Equals","Operands":["done"]}},{"NextAction":"463c2d91-9192-4952-a079-673b07de5251","Condition":{"Operator":"Equals","Operands":["connectToAgent"]}}],"Errors":[{"NextAction":"9323e97f-8e3f-42d6-bc3c-9afd53f62e9e","ErrorType":"NoMatchingCondition"},{"NextAction":"c931ee33-1884-4414-85e9-a8b1655e77e2","ErrorType":"NoMatchingError"}]}}]}